import {Component, Input, OnInit} from '@angular/core';
import {HttpClient} from "@angular/common/http";

@Component({
    selector: 'action-items',
    templateUrl: './action-items.component.html',
    styleUrls: ['./action-items.component.scss']
})
export class ActionItemsComponent implements OnInit {

    @Input() projectId;
    @Input() actions;
    @Input() displayShortcuts: boolean = true;
    @Input() statuses: string[] = [];

    shortcuts: any[];

    pluginShortcutUrl: string = '/api/projects/plugin_shortcuts/';

    constructor(private http: HttpClient) { }

    ngOnInit() {
        if(this.statuses.length) {
            this.actions = this.actions.filter((x) => this.statuses.indexOf(x.status) >= 0);
        }
        if(this.displayShortcuts) {
            this.setShortcuts();
        }
    }

    setShortcuts() {
        this.http.get(this.pluginShortcutUrl).subscribe((data: any) => this.shortcuts = data);
    }

}
