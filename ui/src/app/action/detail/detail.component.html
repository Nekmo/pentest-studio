<mat-sidenav-container class="example-sidenav-container"
    [style.marginTop.px]="mobileQuery.matches ? 56 : 0">

    <mat-sidenav opened id="left-panel" #snav
        [mode]="mobileQuery.matches ? 'over' : 'side'"
        [fixedInViewport]="mobileQuery.matches" fixedTopGap="56">
        <action-panel [projectId]="projectId"></action-panel>
    </mat-sidenav>

    <mat-sidenav-content>
        <div fxLayout="row" class="action-info" *ngIf="action">
            <div class="action-icon">
                <mat-icon mat-list-icon *ngIf="action.status == 'SUCCESS'">done</mat-icon>
                <mat-icon mat-list-icon *ngIf="action.status == 'ERROR'">error</mat-icon>
                <mat-icon mat-list-icon *ngIf="action.status == 'RUNNING'">timelapse</mat-icon>
                <mat-icon mat-list-icon *ngIf="action.status == 'PENDING'">departure_board</mat-icon>
            </div>
            <div fxLayout="column">
                <div class="action-title">
                    <h2 class="mat-title">{{ action.name }}</h2>
                </div>
                <div class="mat-subheading-2 subtext" *ngIf="action.server">
                    <span *ngIf="action.status == 'RUNNING'">Running in </span>
                    <span *ngIf="['SUCCESS', 'ERROR'].indexOf(action.status) >= 0">Executed in </span>
                    <span *ngIf="action.status == 'PENDING'">It will run on </span>
                    {{ action.server.name }}
                </div>
            </div>

            <div fxFlex></div>

            <div fxLayout="column" class="mat-typography">
                <div class="date">
                    <mat-icon>scheduler</mat-icon>
                    Created {{ action.created_at | amTimeAgo }}
                </div>
                <div class="date" *ngIf="!action.completed_at">
                    <mat-icon>update</mat-icon>
                    Updated {{ action.updated_at | amTimeAgo }}
                </div>
                <div class="date" *ngIf="action.completed_at">
                    <mat-icon>done</mat-icon>
                    Complete {{ action.completed_at | amTimeAgo }}
                </div>
            </div>


        </div>

        <mat-tab-group (selectedIndexChange)="getTab($event)">
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="tab-icon">branding_watermark</mat-icon>
                    Terminal
                </ng-template>
                <console *ngIf="action && action.terminal_url" [url]="action.terminal_url" #terminal
                    [auth]="action.terminal_auth"></console>
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="tab-icon">local_movies</mat-icon>
                    Video
                </ng-template>
                <div id="asciinema">

                </div>
                <!-- <asciinema-player src="/api/projects/actions/4/asciinema.cast"></asciinema-player> -->
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="tab-icon">description</mat-icon>
                    Output
                </ng-template>

                <console *ngIf="terminal_output" [data]="terminal_output"></console>
            </mat-tab>
        </mat-tab-group>

    </mat-sidenav-content>
</mat-sidenav-container>
