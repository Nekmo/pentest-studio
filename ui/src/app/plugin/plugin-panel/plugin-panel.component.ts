import {Component, EventEmitter, OnDestroy, OnInit} from '@angular/core';
import {Subject} from "rxjs";
import {debounceTime, takeUntil} from "rxjs/operators";

@Component({
  selector: 'plugin-panel',
  templateUrl: './plugin-panel.component.html',
  styleUrls: ['./plugin-panel.component.scss']
})
export class PluginPanelComponent implements OnInit, OnDestroy {

    url = '/api/projects/plugins/';
    search: string = '';
    debouncedSearch: string = '';
    debouncedUpdateResults = new Subject();
    debounceTimeUpdateResults: number = 200;
    destroy$ = new EventEmitter();

    constructor() { }

    ngOnInit() {
        this.debouncedUpdateResults.pipe(
          debounceTime(this.debounceTimeUpdateResults),
          takeUntil(this.destroy$),
        ).subscribe(() => {
          this.debouncedSearch = this.search;
        });
    }

    ngOnDestroy(): void {
        this.destroy$.emit();
        this.destroy$.complete();
    }

}
