<div fxLayout="row wrap" fxLayoutAlign="center center" id="projects-list">
    <div style="padding-top: 20px;" class="container">
        <mat-accordion class="example-headers-align" multi>
            <mat-expansion-panel *ngFor="let worker of workers"
                                 [disabled]="!workerMetrics[worker.id]">
                <mat-expansion-panel-header>
                    <app-worker-node [worker]="worker" [workerMetric]="workerMetrics[worker.id]"></app-worker-node>
                </mat-expansion-panel-header>

                <ng-template matExpansionPanelContent>
                    <mat-list>
                        <mat-list-item *ngFor="let terminalMetric of terminalMetrics[worker.id] | keyvalue | minUpdatedAtFilter:minUpdatedAt">
                            <!-- TODO: projectId -->
                            <a [routerLink]="['/projects', terminalMetric.value.project_id, 'actions', terminalMetric.value.terminal_name]">
                                {{ terminalMetric.value.project_name }} - {{ terminalMetric.value.action_name }}
                            </a>
                            <span fxFlex></span>
                            <span class="state-info" title="CPU usage">
                                <mat-icon>speed</mat-icon>
                                <span>{{ terminalMetric.value.cpu_percent | number: '1.0-2' }}%</span>
                            </span>
                            <span class="state-info" title="Memory usage">
                                <mat-icon>memory</mat-icon>
                                <span>{{ terminalMetric.value.memory_percent | number: '1.0-2' }}%</span>
                            </span>
                        </mat-list-item>
                    </mat-list>
                </ng-template>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</div>
