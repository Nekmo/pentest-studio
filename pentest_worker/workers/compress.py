import io
import os
import tarfile


def create_memory_tar(directory):
    file_like_object = io.BytesIO()
    tar = tarfile.open(fileobj=file_like_object, mode='w')
    # use "tar" as a regular TarFile object
    tar.add(directory, arcname=os.path.basename(directory))
    tar.close()
    file_like_object.seek(0)
    return file_like_object
